{% extends 'professor/base.html' %}
{% load static from staticfiles %}
{% block linkscript %}
{% endblock linkscript %}
{% block base %}
    <div style="width: 95%;margin:0 auto">

        <script src="{% static 'professorTable/js/jquery-3.2.1.min.js' %}"></script>
        <script src="https://unpkg.com/tableexport.jquery.plugin/tableExport.min.js"></script>
{#        <script src="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table-locale-all.min.js"></script>#}

        <table
          id="table"
{#          data-toolbar="#toolbar"#}
          data-search="true"
          data-show-refresh="true"
{#          data-show-toggle="true"#}
          data-show-fullscreen="true"
          data-show-columns="true"
{#          data-show-columns-toggle-all="true"#}
          data-detail-view="false"
          data-show-export="true"
{#          data-click-to-select="false"#}
{#          data-detail-formatter="detailFormatter"#}
          data-minimum-count-columns="2"
{#          data-show-pagination-switch="true"#}
          data-pagination="false"
          data-id-field="id"
{#          data-page-list="[10, 25, 50, 100, all]"#}
{#          data-show-footer="true"#}
          data-side-pagination="server"

          data-response-handler="responseHandler"
          >

        </table>

        <script>
          var $table = $('#table')
          var selections = []

          function getIdSelections() {
            return $.map($table.bootstrapTable('getSelections'), function (row) {
              return row.id
            })
          }

          function responseHandler(res) {
            $.each(res.rows, function (i, row) {
              row.state = $.inArray(row.id, selections) !== -1
            })
            return res
          }

          function detailFormatter(index, row) {
            var html = []
            $.each(row, function (key, value) {
              html.push('<p><b>' + key + ':</b> ' + value + '</p>')
            })
            return html.join('')
          }

          function initTable() {
            $table.bootstrapTable('destroy').bootstrapTable({
              height: 800,
                
              url:"/LoadData/",

              {#locale: 'zh-CN',#}
              columns: [
                [{
                  title: '委托单编号',
                  colspan: 1,

                  align: 'center',
                  valign: 'middle',
                }, {
                  colspan: 5,
                  align: 'center'
                },
                {
                  title: '试验人员',
                  colspan: 2,
                  align: 'center',
                  valign: 'middle',
                },
                 {
                  colspan: 2,
                  align: 'center'
                },{
                  title: '试验开始',
                  colspan: 1,
                  align: 'center',
                  valign: 'middle',
                }, {
                  colspan: 2,
                  align: 'center'
                },
                {
                  title: '试验结束',
                  colspan: 1,
                  align: 'center',
                  valign: 'middle',
                }, {
                  colspan: 2,
                  align: 'center'
                }],
                [{
                  title: '试样名称',
                  colspan: 1,
                  align: 'center',
                  valign: 'middle',
                }, {
                  colspan: 5,
                  align: 'center'
                },
                {
                  title: '设备名称',
                  colspan: 2,
                  align: 'center',
                  valign: 'middle',
                },
                 {
                  colspan: 2,
                  align: 'center'
                },{
                  title: '量具名称',
                  colspan: 1,
                  align: 'center',
                  valign: 'middle',
                }, {
                  colspan: 5,
                  align: 'center'
                }],
                [{
                  title: '检验依据',
                  colspan: 1,
                  align: 'center',
                  valign: 'middle',
                }, {
                  colspan: 5,
                  align: 'center'
                },
                {
                  title: '设备编号',
                  colspan: 2,
                  align: 'center',
                  valign: 'middle',
                },
                 {
                  colspan: 2,
                  align: 'center'
                },{
                  title: '量具编号',
                  colspan: 1,
                  align: 'center',
                  valign: 'middle',
                }, {
                  colspan: 5,
                  align: 'center'
                }],
                [
                    {
                    field: 'id',
                    title: '试样</br>编号',
                    align:'center',
                    valign:'center',

                },
                {
                    field: 'name',
                    title: '钢号</br>级别',
                    align:'center',
                    valign:'center',

                },
                {
                    field: 'danwei',
                    title: '规格</br>mm',
                    align:'center',

                    valign:'center',

                },
                {
                    field: 'zhengzhimianmao',
                    title: '面积</br>mm²',
                    align:'center',
                    valign:'center',

                },
                {
                    field: 'zhiwu',
                    title: '屈服负荷</br>kNFp0.2',
                    align: 'center',

                    valign:'center',

                },
                {
                    field: 'zhicheng',
                    title: '屈服强度</br>MPaRp0.2',
                    maxHeight:'5em',
                    align: 'center',

                    valign:'center',

                },
                {
                    field: 'shenfenzhenghao',
                    title: '最大负荷</br>kNFm',
                    align: 'center',
                    valign:'center',


                },
                {
                    field: 'lianxidianhua',
                    title: '抗拉强度</br>MPaRm',
                    align: 'center',
                    valign:'center',


                },
                {
                    field: 'kechengmingcheng',
                    title: '原始标距</br>mm',
                    align: 'center',
                    valign:'center',


                },
                {
                    field: 'kaihuhang',
                    title: '断后标距</br>mm',
                    align: 'center',
                    valign:'center',


                },
                {
                    field: 'kahao',
                    title: '伸长率</br>%',
                    align: 'center',
                    valign:'center',


                },
                {
                    field: 'shehuijianzhi',
                    title: '最大力原始</br>标距mm',
                    align: 'center',
                    valign:'center',


                },
                {
                    field: 'labels',
                    title: '最大力断后</br>标距mm',
                    align: 'center',
                    valign:'center',


                },

                {
                    field: 'hezuoqingkuang',
                    title: '最大力</br>总延伸率%',
                    align: 'center',
                    valign:'center',


                },
                {
                    field: 'zhengzhibiaoxian',
                    title: '强屈比',
                    align: 'center',
                    valign:'center',


                },
                {
                    field: 'shoukejilu',
                    title: '屈屈比',
                    align: 'center',

                    valign:'center',

                },
            ]
              ]
            })
            $table.on('check.bs.table uncheck.bs.table ' +
              'check-all.bs.table uncheck-all.bs.table',
            function () {
              {#$remove.prop('disabled', !$table.bootstrapTable('getSelections').length)#}

              // save your data, here just save the current page
              selections = getIdSelections()
              // push or splice the selections if you want to save all data selections
            })
            $table.on('all.bs.table', function (e, name, args) {
              console.log(name, args)
            })
            {#$remove.click(function () {#}
            {#  var ids = getIdSelections()#}
            {#  $table.bootstrapTable('remove', {#}
            {#    field: 'id',#}
            {#    values: ids#}
            {#  })#}
            {#  $remove.prop('disabled', true)#}

          }

          $(function() {
            initTable()

            {#$('#locale').change(initTable)#}
          })
        </script>
    </div>
    <meta charset="utf-8">
    {#    <meta name="viewport"#}
    {#          content="width=device-width, user-scalable=no, initial-scale=glyphicons-halflings-regular.svg.0, maximum-scale=glyphicons-halflings-regular.svg.0, minimum-scale=glyphicons-halflings-regular.svg.0">#}
    {#    <link rel="stylesheet" type="text/css" href="{% static 'base/css/reset.css' %}"/>#}
    {#    <link rel="stylesheet" type="text/css" href="{% static 'base/css/index.css' %}"/>#}
    <link rel="stylesheet" href="{% static 'professorTable/css/reset.css' %}">
    <link rel="stylesheet" href="{% static 'professorTable/css/style.css' %}">
    <link href="{% static 'professorTable/css/layx.min.css' %}" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="{% static 'professorTable/css/professorTable.css' %}">
    <link rel="stylesheet" href="{% static 'professorTable/css/bootstrap.min.css' %}">
    {#    <link href="{% static 'professorTable/css/bootstrap-editable.css' %}" rel="stylesheet" type="text/css" />#}
    <link rel="stylesheet" href="{% static 'professorTable/css/all.css' %}">
    <link rel="stylesheet" href="{% static 'professorTable/css/bootstrap-table.min.css' %}">
{#    <script src="{% static 'professorTable/js/jquery-3.2.1.min.js' %}"></script>#}
    <script src="{% static 'professorTable/js/popper.min.js' %}"></script>
    <script src="{% static 'professorTable/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'professorTable/js/tableExport.js' %}"></script>
    <script src="{% static 'professorTable/js/bootstrap-table.js' %}"></script>
    <script src="{% static 'professorTable/js/bootstrap-table-filter-control.min.js' %}"></script>
    <script src="{% static 'professorTable/js/bootstrap-table-export.js' %}"></script>
{#    <script src="{% static 'professorTable/js/layx.js' %}" type="text/javascript"></script>#}
    <script src="{% static 'professorTable/js/bootstrap-table-zh-CN.js' %}"></script>
    <script src="{% static 'professorTable/js/professorTable.js' %}"></script>
{% endblock base %}


