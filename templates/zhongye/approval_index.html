{% extends 'zhongye/base.html' %}
{% load static from staticfiles %}
{% block base %}

  <div style="width: 80%;margin: 0 auto">
  <div style="height: 200px;margin: 0 auto">
    <h3 style="text-align: center;line-height: 200px"><span>审批人员首页表</span></h3>
  </div>


    <!--审批人员首页表-->

    <table
      id="table"
      data-toolbar="#toolbar"
      {#  data-search="true"#}
      data-show-refresh="true"
{#      data-show-toggle="true"#}
      data-show-fullscreen="true"
{#      data-show-columns="true"#}
      data-show-print="true"
{#      data-show-columns-toggle-all="true"#}

      data-show-export="true"
{#      data-click-to-select="true"#}

{#      data-minimum-count-columns="2"#}
      data-show-pagination-switch="true"
      data-pagination="true"
      data-id-field="id"
      data-page-list="[10, 25, 50, 100, all]"

      data-side-pagination="server"
      data-url="https://examples.wenzhixin.net.cn/examples/bootstrap_table/data"
      data-response-handler="responseHandler">
    </table>

    <script>
      var $table = $('#table')
      var selections = []

      function getIdSelections() {
        return $.map($table.bootstrapTable('getSelections'), function (row) {
          return row.id
        })
      }

      function responseHandler(res) {
        $.each(res.rows, function (i, row) {
          row.state = $.inArray(row.id, selections) !== -1
        })
        return res
      }

      function detailFormatter(index, row) {
        var html = []
        $.each(row, function (key, value) {
          html.push('<p><b>' + key + ':</b> ' + value + '</p>')
        })
        return html.join('')
      }

      function operateFormatter(value, row, index) {
        return [
          '<a class="like" href="javascript:void(0)" title="Like">',
          '<i class="fa fa-heart"></i>',
          '</a>  '
        ].join('')
      }

      window.operateEvents = {
        'click .like': function (e, value, row, index) {
          url = "approval.html?index=" + index;
          window.location.href = url;
        }
      }

      function totalNameFormatter(data) {
        return data.length
      }

      function initTable() {
        $table.bootstrapTable('destroy').bootstrapTable({
          {#height: 680,#}
          locale: 'zh-CN',
          columns: [
            {
              title: '报告编号',
              field: 'id',
              align: 'center',
              valign: 'middle',
              sortable: true,
            }, {
              title: '委托单位',
              field: 'client',
              align: 'center',
              valign: 'middle',
              sortable: true,
            }, {
              title: '委托时间',
              field: 'date',
              align: 'center',
              valign: 'middle',
              sortable: true,
            }, {
              field: 'operate',
              title: '操作',
              align: 'center',
              clickToSelect: false,
              events: window.operateEvents,
              formatter: operateFormatter
            }
          ]
        })
        $table.on('check.bs.table uncheck.bs.table ' +
          'check-all.bs.table uncheck-all.bs.table',
          function () {
            // save your data, here just save the current page
            selections = getIdSelections()
            // push or splice the selections if you want to save all data selections
          })
        $table.on('all.bs.table', function (e, name, args) {
          console.log(name, args)
        })

      }

      $(function () {
        initTable()

        $('#locale').change(initTable)
      })
    </script>
  </div>




{% endblock base %}